class CartPoleEnvironment{constructor(){this.gravity=9.8,this.masscart=1,this.masspole=.1,this.totalMass=this.masscart+this.masspole,this.length=.5,this.polemassLength=this.masspole*this.length,this.forceMag=10,this.tau=.02,this.thetaThresholdRadians=24*Math.PI/360,this.xThreshold=2.4,this.maxSteps=500,this.state=null,this.steps=0,this.done=!1,this.terminationReason=null,this.reset()}reset(){return this.state={x:this.randomUniform(-.05,.05),x_dot:this.randomUniform(-.05,.05),theta:this.randomUniform(-.05,.05),theta_dot:this.randomUniform(-.05,.05)},this.steps=0,this.done=!1,this.terminationReason=null,{...this.state}}randomUniform(min,max){return min+(max-min)*Math.random()}getForce(action){return 0===action?-this.forceMag:1===action?this.forceMag:0}getTerminationReason(state){return Math.abs(state.theta)>this.thetaThresholdRadians?"Pole angle exceeded 12Â°":Math.abs(state.x)>this.xThreshold?"Cart moved outside track limits":this.steps>=this.maxSteps?"Time limit reached (10 seconds)":null}isDone(state){return Math.abs(state.theta)>this.thetaThresholdRadians||Math.abs(state.x)>this.xThreshold||this.steps>=this.maxSteps}step(action=0){if(this.done)return{state:{...this.state},reward:0,done:!0,info:{reason:this.terminationReason}};const force=this.getForce(action),costheta=Math.cos(this.state.theta),sintheta=Math.sin(this.state.theta),temp=(force+this.polemassLength*this.state.theta_dot*this.state.theta_dot*sintheta)/this.totalMass,thetaacc=(this.gravity*sintheta-costheta*temp)/(this.length*(4/3-this.masspole*costheta*costheta/this.totalMass)),xacc=temp-this.polemassLength*thetaacc*costheta/this.totalMass,newState={x:this.state.x+this.tau*this.state.x_dot,x_dot:this.state.x_dot+this.tau*xacc,theta:this.state.theta+this.tau*this.state.theta_dot,theta_dot:this.state.theta_dot+this.tau*thetaacc};this.state=newState,this.steps+=1,this.done=this.isDone(newState),this.done&&(this.terminationReason=this.getTerminationReason(newState));return{state:{...newState},reward:1,done:this.done,info:{reason:this.terminationReason}}}}"undefined"!=typeof module&&module.exports&&(module.exports={CartPoleEnvironment:CartPoleEnvironment});