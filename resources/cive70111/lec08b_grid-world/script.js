const GRID_SIZE=5,CELL_SIZE=80,GRID_PADDING=10,EMPTY=0,OBSTACLE=1,START=2,GOAL=3,AGENT=4,PATH=5;let agentRow=4,agentCol=0,steps=0,totalReward=0,gameOver=!1,visitedCells=new Set;const grid=[[0,0,1,0,3],[0,0,0,0,0],[0,0,1,1,1],[0,0,0,0,0],[2,1,0,0,0]];let canvas,ctx;const COLORS={empty:"#ffffff",obstacle:"#6c757d",start:"#28a745",goal:"#ffc107",agent:"#007bff",path:"#e3f2fd",grid:"#dee2e6",text:"#343a40"};function init(){canvas=document.getElementById("gridCanvas"),ctx=canvas.getContext("2d");const dpr=window.devicePixelRatio||1;canvas.width=460*dpr,canvas.height=460*dpr,canvas.style.width="460px",canvas.style.height="460px",ctx.scale(dpr,dpr),visitedCells.add(`${agentRow},${agentCol}`),document.addEventListener("keydown",handleKeyboard),render(),updateStats()}function handleKeyboard(e){if(gameOver)return;const key=e.key;"ArrowUp"===key?(e.preventDefault(),moveAgent("up")):"ArrowDown"===key?(e.preventDefault(),moveAgent("down")):"ArrowLeft"===key?(e.preventDefault(),moveAgent("left")):"ArrowRight"===key&&(e.preventDefault(),moveAgent("right"))}function moveAgent(direction){if(gameOver)return;let newRow=agentRow,newCol=agentCol;switch(direction){case"up":newRow=agentRow-1;break;case"down":newRow=agentRow+1;break;case"left":newCol=agentCol-1;break;case"right":newCol=agentCol+1}isValidMove(newRow,newCol)&&(agentRow=newRow,agentCol=newCol,visitedCells.add(`${agentRow},${agentCol}`),steps++,totalReward-=1,3===grid[agentRow][agentCol]&&(totalReward+=10,gameOver=!0,document.getElementById("status").textContent="Goal Reached!",document.getElementById("status").style.color="#28a745"),render(),updateStats())}function isValidMove(row,col){return!(row<0||row>=5||col<0||col>=5)&&1!==grid[row][col]}function render(){ctx.fillStyle="#f8f9fa",ctx.fillRect(0,0,canvas.width,canvas.height);for(let row=0;row<5;row++)for(let col=0;col<5;col++){const x=90*col+10,y=90*row+10;let fillColor=COLORS.empty;!visitedCells.has(`${row},${col}`)||3===grid[row][col]||row===agentRow&&col===agentCol||(fillColor=COLORS.path),1===grid[row][col]?fillColor=COLORS.obstacle:3===grid[row][col]&&(fillColor=COLORS.goal),row===agentRow&&col===agentCol&&(fillColor=COLORS.agent),ctx.fillStyle=fillColor,ctx.fillRect(x,y,80,80),ctx.strokeStyle=COLORS.grid,ctx.lineWidth=2,ctx.strokeRect(x,y,80,80),ctx.fillStyle=COLORS.text,ctx.font="bold 14px monospace",ctx.textAlign="center",ctx.textBaseline="middle",3!==grid[row][col]||row===agentRow&&col===agentCol?4!==row||0!==col||row===agentRow&&col===agentCol?row===agentRow&&col===agentCol&&(ctx.fillStyle="#ffffff",ctx.font="bold 24px monospace",ctx.fillText("A",x+40,y+40)):(ctx.font="bold 12px monospace",ctx.fillText("START",x+40,y+40)):ctx.fillText("GOAL",x+40,y+40)}}function updateStats(){document.getElementById("steps-count").textContent=steps,document.getElementById("total-reward").textContent=totalReward,gameOver||(document.getElementById("status").textContent="In Progress",document.getElementById("status").style.color="#007bff")}function resetEnvironment(){agentRow=4,agentCol=0,steps=0,totalReward=0,gameOver=!1,visitedCells.clear(),visitedCells.add(`${agentRow},${agentCol}`),document.getElementById("status").textContent="Ready",document.getElementById("status").style.color="#343a40",render(),updateStats()}document.addEventListener("DOMContentLoaded",init),new InfoTab;